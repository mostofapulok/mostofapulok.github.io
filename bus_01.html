<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1">
		
		<title>Transport Tracker</title>
		
		<!-- Table -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
        <link rel="stylesheet" href="css/style.css">

		<!-- Loading third party fonts -->
		<link href="http://fonts.googleapis.com/css?family=Roboto:300,400,700|" rel="stylesheet" type="text/css">
		<link href="fonts/font-awesome.min.css" rel="stylesheet" type="text/css">

		<!-- Loading main css file -->
		<link rel="stylesheet" href="style.css">
		
		<!--[if lt IE 9]>
		<script src="js/ie-support/html5.js"></script>
		<script src="js/ie-support/respond.js"></script>
		<![endif]-->
		
		
		<style>           
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 600px;
      }
      /* Optional: Makes the sample page fill the window. */
      
      #floating-panel {
        position: absolute;
        top: 10px;
        left: 25%;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
        text-align: center;
        font-family: 'Roboto','sans-serif';
        line-height: 30px;
        padding-left: 10px;
      }
            
      #right-panel {
        font-family: 'Roboto','sans-serif';
        line-height: 30px;
        padding-left: 10px;
      }

      #right-panel select, #right-panel input {
        font-size: 15px;
      }

      #right-panel select {
        width: 100%;
      }

      #right-panel i {
        font-size: 12px;
      }
      #right-panel {
        height: 600px;
        float: right;
        width: 190px;
        overflow: auto;
      }
      #map {
        margin-right: 150px;
      }
      #floating-panel {
        background: #fff;
        padding: 5px;
        font-size: 14px;
        font-family: Arial;
        border: 1px solid #ccc;
        box-shadow: 0 2px 2px rgba(33, 33, 33, 0.4);
        display: none;
      }
      @media print {
        #map {
          height: 300px;
          margin: 0;
        }
        #right-panel {
          float: none;
          width: auto;
        }
      }
    </style>

	</head>


	<body>
		
		<div class="site-content">
			<div class="site-header">
				<div class="container">
					<a href="index.html" class="branding">
						<img src="images/logo.png" alt="" class="logo">
						<div class="logo-type">
							<h1 class="site-title">Transport Tracker</h1>
							<small class="site-description">Online Bus Monitoring System</small>
						</div>
					</a>

					<!-- Default snippet for navigation -->
					<div class="main-navigation">
						<button type="button" class="menu-toggle"><i class="fa fa-bars"></i></button>
						<ul class="menu">
							<li class="menu-item"><a href="index.html">Home</a></li>
							<li class="menu-item current-menu-item"><a href="live-tracking.html">Live Tracking</a></li>
							<li class="menu-item"><a href="schedule.html">Schedule</a></li>
							<li class="menu-item"><a href="station-map.html">Station Map</a></li>
							<li class="menu-item"><a href="contact.html">Contact</a></li>
						</ul> <!-- .menu -->
					</div> <!-- .main-navigation -->

					<div class="mobile-navigation"></div>

				</div>
			</div> <!-- .site-header -->

			<main class="main-content">
				<div class="container">
					<div class="breadcrumb">
						<a href="index.html">Home</a>
						<a href="live-tracking.html">Live tracking</a>
						<span><font size="4px">Bus-01 Details Information</font></span>
					</div>
				</div>
				
				<div class="fullwidth-block">
					<div class="container">
						<div class="row">
							<div class="content col-md-8">
<table class="responstable">
  
  <tr>
    <th>Bus Name</th>
    <th data-th="Details Informatoin"><span>From</span></th>
    <th>To</th>
    <th>Distance</th>
    <th>Approximate Time</th>
 </tr>
  
  <tr>
    <td rowspan="7">Bus 01</td>
    <td>Zero point</td>
    <td>Gollamari</td>
    <td>1.3 km</td>
    <td>3 mins</td>
  </tr>
  
  <tr>
    
    <td>Gollamari</td>
    <td>Sonadangga</td>
    <td>1.8 km</td>
    <td>4 mins</td>
    
  </tr>
  
  <tr>
    
    <td>Sonadangga</td>
    <td>Boyra</td>
    <td>2.6 km</td>
    <td>5 mins</td>
  </tr>
  
  <tr>
    
    <td>Boyra</td>
    <td>Nuton Rasta</td>
    <td>3.2 km</td>
    <td>6 mins</td>
  </tr>
  <tr>
    
    <td>Nuton Rasta</td>
    <td>Dowlatpur</td>
    <td>2.0 km</td>
    <td>4 mins</td>
  </tr>
  <tr>
    
    <td>Dowlatpur</td>
    <td>Fulbari gate</td>
    <td>2.4 km</td>
    <td>5 mins</td>
  </tr>
  <tr>
    
    <td>Fulbari gate</td>
    <td>Shiromoni</td>
    <td>2.0 km</td>
    <td>4 mins</td>
  </tr>
  
  
  
</table>
  <script src='http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.js'></script>
								

								

								
							</div>
							<div class="sidebar col-md-3 col-md-offset-1">
								<div class="widget">
									<h3 class="widget-title">Current Location</h3>
									
                                    <h1 class="location"><font color="gray"><u>Bus 01</u></font></h1>
                                    <h3 class="date" id="bus01">Loading</h3>
								
												
							    </div>
						    </div>
					    </div>
				</div>

				
				<div class="fullwidth-block">
					<div class="container">
						
						<div class="fullwidth-map">
                            
    <div id="floating-panel">
    <strong>Start:</strong>
        <select id="start">           
            <option value="22.798396, 89.528785">Zero Point</option>
            <option value="22.800976, 89.541509">Gollamari</option>
            <option value="22.816294, 89.542892">Sonadangga</option>
            <option value="22.835632, 89.532065">Boyra</option>
            <option value="22.862903, 89.529747">Nuton Rasta</option>
            <option value="22.878624, 89.519941">Dowlatpur</option>
            <option value="22.897869, 89.510059">Fulbari gate</option>
            <option value="22.914388, 89.503214">Shiromoni</option>
        
        
        </select>
                            <br>
    <strong>End:</strong>
        <select id="end">
           <option value="22.914388, 89.503214">Shiromoni</option>
            <option value="22.798396, 89.528785">Zero Point</option>
            <option value="22.800976, 89.541509">Gollamari</option>
            <option value="22.816294, 89.542892">Sonadangga</option>
            <option value="22.835632, 89.532065">Boyra</option>
            <option value="22.862903, 89.529747">Nuton Rasta</option>
            <option value="22.878624, 89.519941">Dowlatpur</option>
            <option value="22.897869, 89.510059">Fulbari gate</option>
            <option value="22.914388, 89.503214">Shiromoni</option>
        </select>
    </div>
    <div id="floating-panel">
    <b>Mode of Travel: </b>
    <select id="mode">
      <option value="DRIVING">Driving</option>
      <option value="WALKING">Walking</option>
      <option value="BICYCLING">Bicycling</option>
      <option value="TRANSIT">Transit</option>
    </select>
    </div>
           
            <div id="right-panel">
            <font color="black" size="4">
            <p><br><b>A=</b> Zero point<br>
            <b>B=</b> Gollamari<br>
            <b>C=</b> Sonadangga<br>
            <b>D=</b> Boyra<br>
            <b>E=</b> Nouton Rasta<br>
            <b>F=</b> Dowlotpur<br>
            <b>G=</b> Fulbari gate<br>
            <b>H=</b> Shiromoni</p>
            
            
      <p><b>Total Distance:</b> <br><span id="total"></span><br>About <span id="time"></span></p>
      <br><br><br><br><br><br><br></font>
    </div>
    <div id="map"></div>
                        </div>
						
						
					</div>
				</div>
				
			</main> <!-- .main-content -->

			<footer class="site-footer">
				<div class="container">
					<div class="row">
						
						<div class="col-md-3 col-md-offset-1">
							<div class="social-links">
								<a href="#"><i class="fa fa-facebook"></i></a>
								<a href="#"><i class="fa fa-twitter"></i></a>
								<a href="#"><i class="fa fa-google-plus"></i></a>
								<a href="#"><i class="fa fa-pinterest"></i></a>
							</div>
						</div>
					</div>

					<p class="colophon">Copyright 2018 Transport Tracker. Designed by ECE'13. All rights reserved</p>
				</div>
			</footer> <!-- .site-footer -->
		</div>
		
		<script src="js/jquery-1.11.1.min.js"></script>
		<script src="js/plugins.js"></script>
		<script src="js/app.js"></script>
		
		<script src="https://www.gstatic.com/firebasejs/4.9.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBfqSHlalv_VBHA5GT51V07TYzq34YVO6c",
    authDomain: "bus-1-7f8a2.firebaseapp.com",
    databaseURL: "https://bus-1-7f8a2.firebaseio.com",
    projectId: "bus-1-7f8a2",
    storageBucket: "bus-1-7f8a2.appspot.com",
    messagingSenderId: "331579277734"
  };
  firebase.initializeApp(config);

    var bus01 = document.getElementById('bus01');
    var dbRef = firebase.database().ref().child('Location (Bus-01)');
    dbRef.on('value', snap => bus01.innerText = snap.val());

    var bus02 = document.getElementById('bus02');
    var dbRef = firebase.database().ref().child('Location (Bus-02)');
    dbRef.on('value', snap => bus02.innerText = snap.val());

    var bus03 = document.getElementById('bus03');
    var dbRef = firebase.database().ref().child('Location (Bus-03)');
    dbRef.on('value', snap => bus03.innerText = snap.val());
    
    var bus04 = document.getElementById('bus04');
    var dbRef = firebase.database().ref().child('Location (Bus-04)');
    dbRef.on('value', snap => bus04.innerText = snap.val());
    
    var bus05 = document.getElementById('bus05');
    var dbRef = firebase.database().ref().child('Location (Bus-05)');
    dbRef.on('value', snap => bus05.innerText = snap.val());
    
    var bus06 = document.getElementById('bus06');
    var dbRef = firebase.database().ref().child('Location (Bus-06)');
    dbRef.on('value', snap => bus06.innerText = snap.val());
    
    var bus07 = document.getElementById('bus07');
    var dbRef = firebase.database().ref().child('Location (Bus-07)');
    dbRef.on('value', snap => bus07.innerText = snap.val());
    
    var bus08 = document.getElementById('bus08');
    var dbRef = firebase.database().ref().child('Location (Bus-08)');
    dbRef.on('value', snap => bus08.innerText = snap.val());
    
    var bus09 = document.getElementById('bus09');
    var dbRef = firebase.database().ref().child('Location (Bus-09)');
    dbRef.on('value', snap => bus09.innerText = snap.val());
    
    var bus10 = document.getElementById('bus10');
    var dbRef = firebase.database().ref().child('Location (Bus-10)');
    dbRef.on('value', snap => bus10.innerText = snap.val());

</script>
   
   <script>
      function initMap() {
        var directionsDisplay = new google.maps.DirectionsRenderer;
        var directionsService = new google.maps.DirectionsService;
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: {lat: 22.801928, lng: 89.578468}
        });
        directionsDisplay.setMap(map);
          
          
          
          
          
          
          
        directionsDisplay.setPanel(document.getElementById('right-panel'));

        var control = document.getElementById('floating-panel');
        control.style.display = 'block';
        map.controls[google.maps.ControlPosition.TOP_CENTER].push(control);
          
          

        var onChangeHandler = function() {
          calculateAndDisplayRoute(directionsService, directionsDisplay);
        };
        document.getElementById('start').addEventListener('change', onChangeHandler);
        document.getElementById('end').addEventListener('change', onChangeHandler);
          
          
      
      directionsDisplay.addListener('directions_changed', function() {
          computeTotalDistance(directionsDisplay.getDirections());
        });    
          
          
      displayRoute('22.798396, 89.528785', '22.914388, 89.503214', directionsService,
            directionsDisplay);
      
      
      }

      function calculateAndDisplayRoute(directionsService, directionsDisplay) {
        var start = document.getElementById('start').value;
        var end = document.getElementById('end').value;
        directionsService.route({
          origin: start,
          destination: end,
          travelMode: 'DRIVING'
        }, function(response, status) {
          if (status === 'OK') {
            directionsDisplay.setDirections(response);
          } else {
            window.alert('Directions request failed due to ' + status);
          }
        });
      }
       
       function displayRoute(origin, destination, service, display) {
        service.route({
          origin: origin,
          destination: destination,
          waypoints: [{location: 'Gallamari Bus Stop, Khulna'}, {location: '22.816294, 89.542892'}, {location: '22.835632, 89.532065'},{location: '22.862903, 89.529747'},{location: '22.878624, 89.519941'},{location: '22.897869, 89.510059'}],
          travelMode: 'DRIVING',
          avoidTolls: true
        }, function(response, status) {
          if (status === 'OK') {
            display.setDirections(response);
          } else {
            alert('Could not display directions due to: ' + status);
          }
        });
      }

      function computeTotalDistance(result) {
        var total = 0;
        var myroute = result.routes[0];
        for (var i = 0; i < myroute.legs.length; i++) {
          total += myroute.legs[i].distance.value;
          
        }
        total = total / 1000;
        time = total / 0.5;
        document.getElementById('total').innerHTML = total.toFixed(1) + ' km';
        document.getElementById('time').innerHTML = time.toFixed(0) + ' mins';
      }
        
        
       
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCpfJuIAy-d9VZKNEZWCVPT9SipL8Epz8E&callback=initMap">
    </script>
    
		
	</body>

</html>